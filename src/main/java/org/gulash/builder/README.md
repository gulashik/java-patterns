# Паттерн Строитель (Builder)

## Суть паттерна
**Строитель** — это порождающий паттерн проектирования, который позволяет создавать сложные объекты пошагово. Строитель дает возможность использовать один и тот же код строительства для получения различных представлений объектов.

В отличие от других порождающих паттернов, Строитель не требует, чтобы продукты имели общий интерфейс. Это позволяет создавать совершенно разные объекты, используя один и тот же процесс сборки.

## Мотивация (Зачем это нужно?)
1.  **Решение проблемы "телескопического конструктора":** Когда у класса много параметров (особенно необязательных), конструктор становится огромным и трудночитаемым. 
    `new Computer("Intel", "16GB", "512GB", null, true, null, ...)` — в таком коде легко ошибиться порядком аргументов.
2.  **Пошаговое создание:** Позволяет создавать объект постепенно, вызывая только те методы, которые нужны для конкретной конфигурации.
3.  **Иммутабельность (Неизменяемость):** Builder позволяет создавать неизменяемые объекты. Мы собираем данные в строителе, а затем создаем `final` объект.
4.  **Валидация:** Метод `build()` — отличное место для проверки комплексной согласованности данных перед созданием реального объекта.

## Реализация в Java
В Java наиболее распространен "внутренний статический Builder" (как в классе `Computer` в этом примере).

### Основные компоненты:
*   **Product (Computer):** Сложный объект, который мы создаем. Конструктор обычно `private`.
*   **Builder (статический вложенный класс):** Содержит те же поля, что и продукт. Методы-сеттеры возвращают `this` для реализации Fluent API (цепочки вызовов).
*   **Метод build():** Вызывает приватный конструктор продукта, передавая себя в качестве аргумента.

## Best Practices (Лучшие практики)
*   **Обязательные поля:** Передавайте их в конструктор Билдера.
*   **Fluent Interface:** Всегда возвращайте `this` из методов настройки.
*   **Иммутабельность:** Делайте поля основного класса `final`, а сеттеры в нем не создавайте.
*   **Защитное копирование:** Если объект содержит коллекции, в методе `build()` или сеттерах делайте их неизменяемыми (`List.copyOf`).

## Подводные камни
*   **Дублирование кода:** Приходится дублировать поля в продукте и билдере.
*   **Усложнение кода:** Для простых объектов паттерн избыточен.
*   **Затраты памяти:** Создание дополнительного объекта-строителя (обычно незначительно, но стоит учитывать в высоконагруженных системах).

## Сравнение с другими паттернами

| Паттерн | Сходство | Отличие |
| :--- | :--- | :--- |
| **Abstract Factory** | Оба создают сложные объекты. | Фабрика возвращает объект сразу. Строитель делает это пошагово. Фабрика ориентирована на семейства продуктов. |
| **Facade** | Оба упрощают работу со сложной системой. | Фасад упрощает *интерфейс* уже существующих подсистем. Строитель упрощает *процесс создания* одного сложного объекта. |
| **Prototype** | Оба создают объекты. | Прототип копирует существующий объект. Строитель создает новый, конфигурируя его "с нуля". |
